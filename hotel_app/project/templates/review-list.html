{% extends 'layout.html' %}

{% block title %}Order List{% endblock %}

{% block content %}
<style>
.bi-star-fill {
  color: #ddd;
}
.bi-star-fill.checked {
  color: #f5c518;
}
</style>
<div class="container col-md-8 mx-auto my-5">
  <div class="table-responsive">
    <table class="table" style="width: 100%; max-width: none;">
      <thead>
        <tr>
          <th scope="col" style="width: 20%;">Order ID</th>
          <th scope="col" style="width: 20%;">Date</th>
          <th scope="col" style="width: 20%;">Rating</th>
          <th scope="col" style="width: 20%;">Review</th>
          <th scope="col" style="width: 20%;">Operate</th>
        </tr>
      </thead>
      <tbody>
        {% for item in list %}
        <tr>
          <td>{{ item.oid }}</td>
          <td>{{ item.date }}</td>
          <td>
            {% for i in range(5) %}
              <i class="bi bi-star-fill {{ 'checked' if i < item.rating }}"></i>
            {% endfor %}
          </td>
          <td>{{ item.review }}</td>
          <td>
            <button class="btn btn-success btn-sm mb-1" id="start-review-btn-{{ item.id }}" style="width: 100px;" onclick="startReview({{ item.id }})">
              <i class="bi bi-pencil"></i> Edit
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
function startReview(id) {
  window.location.href = `{{ url_for('app.review_submit') }}?id=${id}`;
}

</script>
{% endblock %}
