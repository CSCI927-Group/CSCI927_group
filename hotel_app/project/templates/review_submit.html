{% extends 'layout.html' %}

{% block title %}Submit Your Review{% endblock %}

{% block content %}
<div class="container my-5">
    <h2 class="mb-4">Submit Your Review</h2>
    
    <div class="mb-3">
        <label for="rating" class="form-label">Rating (0-5)</label>
        <select class="form-select" id="rating" name="rating" required>
            <option value="" disabled selected>Select your rating</option>
            {% for i in range(6) %}
            <option value="{{ i }}">{{ i }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="mb-3">
        <label for="review" class="form-label">Your Review</label>
        <textarea class="form-control" id="review" rows="4" required placeholder="Write your review here..."></textarea>
    </div>
    
    <button id="submitReview" class="btn btn-primary">Submit</button>
    <a href="{{ url_for('app.index') }}" class="btn btn-outline-primary mx-2">Home</a>
</div>

<script>
    // Store the URL for redirection
    const homeUrl = "{{ url_for('app.index') }}";

    document.getElementById('submitReview').addEventListener('click', function() {
        const rating = document.getElementById('rating').value;
        const review = document.getElementById('review').value;

        if (rating && review) {
            const confirmSubmission = confirm('Are you sure you want to submit your review?');
            if (confirmSubmission) {
                alert('Review submitted successfully!'); // Show success message
                // Optionally, you can clear the fields
                document.getElementById('rating').value = '';
                document.getElementById('review').value = '';

                // Redirect to app.index
                window.location.href = homeUrl; // Use the stored URL
            }
        } else {
            alert('Please fill in all fields.');
        }
    });
</script>
{% endblock %}
